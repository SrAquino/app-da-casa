(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[809],{972:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/lista-de-compras",function(){return t(3315)}])},8636:(e,a,t)=>{"use strict";t.d(a,{A:()=>d});var s=t(4848),i=t(6540),r=t(1106),c=t.n(r),n=t(3914),l=t(2490),o=t.n(l);let d=()=>{let[e,a]=(0,i.useState)(!1);return(0,s.jsxs)("div",{className:"".concat(o().sidebar," ").concat(e?o().expanded:o().collapsed),children:[(0,s.jsx)("button",{onClick:()=>{a(!e)},className:o().toggleButton,children:e?"Esconder":(0,s.jsx)(n.OXb,{})}),(0,s.jsx)("h2",{children:"Menu"}),(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:(0,s.jsx)(c(),{href:"/controle-de-gastos",children:e?"Controle de Gastos":(0,s.jsx)(n.MxO,{})})}),(0,s.jsx)("li",{children:(0,s.jsx)(c(),{href:"/analise-gastos",children:e?"Gr\xe1ficos":(0,s.jsx)(n.qvi,{})})}),(0,s.jsx)("li",{children:(0,s.jsx)(c(),{href:"/lista-de-compras",children:e?"Lista de Compras":(0,s.jsx)(n.AsH,{})})}),(0,s.jsx)("li",{children:(0,s.jsx)(c(),{href:"/analise-mercado",children:e?"Pre\xe7os de mercado":(0,s.jsx)(n.qvi,{})})})]})]})}},3315:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>o});var s=t(4848),i=t(6540),r=t(8636),c=t(7525),n=t(1953),l=t.n(n);let o=()=>{let[e,a]=(0,i.useState)([]),[t,n]=(0,i.useState)(""),[o,d]=(0,i.useState)("Horti"),[u,p]=(0,i.useState)(!1),[h,_]=(0,i.useState)([]),[m,x]=(0,i.useState)(null),[j,b]=(0,i.useState)(!0),[v,N]=(0,i.useState)(new Date().toISOString().split("T")[0]),[g,C]=(0,i.useState)(0),[f,y]=(0,i.useState)({}),[k,S]=(0,i.useState)({}),w=["Horti","Base","Higiene","Bebida","Tempero","Extra","Carne"];(0,i.useEffect)(()=>{(0,c.JS)().then(e=>{a(e)}).catch(e=>{console.error("There was an error fetching the items!",e)})},[]);let q=t=>{window.confirm("Tem certeza que deseja excluir este item?")&&(0,c.LD)(t).then(()=>{a(e.filter(e=>e.id!==t))}).catch(e=>{console.error("There was an error deleting the item!",e)})},I=(e,a,t)=>{_(h.map(s=>s.id===e?{...s,[a]:t}:s))},T=e=>{_(h.map(a=>a.id===e?{...a,active:!a.active}:a))},B=e=>{y(a=>({...a,[e]:!a[e]}))},E=e=>{S(a=>({...a,[e]:!a[e]}))},L=w.reduce((a,t)=>(a[t]=e.filter(e=>e.category===t),a),{}),A=w.reduce((e,a)=>(e[a]=h.filter(e=>e.category===a),e),{});return(0,s.jsxs)("div",{className:l().container,children:[(0,s.jsx)(r.A,{}),(0,s.jsxs)("div",{className:l().content,children:[(0,s.jsx)("h1",{className:l().title,children:"Lista de Compras"}),w.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:l().categoryTitle,children:[e,(0,s.jsx)("button",{onClick:()=>B(e),className:l().expandButton,children:f[e]?"Minimizar":"Expandir"})]}),(0,s.jsx)("ul",{className:"".concat(l().list," ").concat(f[e]?"":l().hiddenList),children:L[e].map(a=>(0,s.jsxs)("li",{className:"".concat(l().listItem," ").concat(l()[e.toLowerCase()]),children:[a.name,(0,s.jsx)("button",{onClick:()=>q(a.id),className:l().deleteButton,children:"Excluir"})]},a.id))})]},e)),(0,s.jsx)("input",{type:"text",value:t,onChange:e=>n(e.target.value),placeholder:"Adicionar novo item",className:l().input}),(0,s.jsx)("select",{value:o,onChange:e=>d(e.target.value),className:l().select,children:w.map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsx)("button",{onClick:()=>{if(""!==t.trim()){if(e.find(e=>e.name.toLowerCase()===t.toLowerCase()&&e.category===o)){alert("Este item j\xe1 foi adicionado.");return}(0,c.B5)({name:t,category:o}).then(t=>{a([...e,t]),n(""),u&&_([...h,{...t,quantity:"",price:"",date:v}])}).catch(e=>{console.error("There was an error adding the item!",e)})}},className:l().button,children:"Adicionar"}),(0,s.jsx)("button",{onClick:()=>{_(e.map(e=>({...e,quantity:"",price:"",date:v,active:!1}))),p(!0)},className:l().button,children:"Fazer Nova Compra"}),u&&(0,s.jsxs)("div",{className:l().purchaseContainer,children:[(0,s.jsx)("h2",{children:"Nova Compra"}),(0,s.jsxs)("label",{className:l().label,children:[(0,s.jsx)("input",{type:"checkbox",checked:j,onChange:()=>b(!j),className:l().checkbox}),"Usar data de hoje"]}),!j&&(0,s.jsx)("input",{type:"date",value:v,onChange:e=>N(e.target.value),className:l().input}),w.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:l().categoryTitle,children:[e,(0,s.jsx)("button",{onClick:()=>E(e),className:l().expandButton,children:k[e]?"Minimizar":"Expandir"})]}),(0,s.jsx)("ul",{className:"".concat(l().purchaseList," ").concat(k[e]?"":l().hiddenList),children:A[e].map(a=>(0,s.jsxs)("li",{className:"".concat(l().purchaseItem," ").concat(l()[e.toLowerCase()]),children:[(0,s.jsx)("span",{children:a.name}),(0,s.jsx)("input",{type:"number",placeholder:"Qtd",value:a.quantity,onChange:e=>I(a.id,"quantity",e.target.value),className:"".concat(l().input," ").concat(l().quantityInput),disabled:!a.active}),(0,s.jsx)("input",{type:"number",placeholder:"Pre\xe7o",value:a.price,onChange:e=>I(a.id,"price",e.target.value),className:"".concat(l().input," ").concat(l().priceInput),disabled:!a.active}),(0,s.jsxs)("label",{className:l().label,children:[(0,s.jsx)("input",{type:"checkbox",checked:a.active,onChange:()=>T(a.id),className:l().checkbox}),"Ativo"]})]},a.id))})]},e)),(0,s.jsx)("button",{onClick:()=>{C(h.reduce((e,a)=>a.active?e+parseFloat(a.quantity)*parseFloat(a.price):e,0))},className:l().button,children:"Conferir Valor Atual"}),g>0&&(0,s.jsx)("div",{className:l().currentTotal,children:(0,s.jsxs)("h2",{children:["Valor Atual: R$",g.toFixed(2)]})}),(0,s.jsx)("button",{onClick:()=>{for(let e of h)if(e.active&&(!e.quantity||!e.price)){alert("Por favor, preencha todos os campos de quantidade e pre\xe7o para os itens ativos.");return}let e=h.filter(e=>e.active),a=e.reduce((e,a)=>e+parseFloat(a.quantity)*parseFloat(a.price),0),t={items:e,date:v};(0,c.hB)(t).then(()=>{p(!1),_([]),x(a),(0,c.dC)({totalValue:a,date:t.date})}).catch(e=>{console.error("There was an error saving the purchase!",e)})},className:l().button,children:"Finalizar Compra"})]}),null!==m&&(0,s.jsx)("div",{className:l().lastPurchaseTotal,children:(0,s.jsxs)("h2",{children:["Valor Total da \xdaltima Compra: R$",m.toFixed(2)]})})]})]})}},2490:e=>{e.exports={sidebar:"Sidebar_sidebar__HYpoR",collapsed:"Sidebar_collapsed__jq1k3",toggleButton:"Sidebar_toggleButton__u5PL9",expanded:"Sidebar_expanded__t69bD"}},1953:e=>{e.exports={container:"lista-de-compras_container__hUshF",content:"lista-de-compras_content__RQ1As",title:"lista-de-compras_title__zraMx",categoryTitle:"lista-de-compras_categoryTitle__fWSrq",list:"lista-de-compras_list__kNx_g",listItem:"lista-de-compras_listItem__o2Zq9",purchaseItem:"lista-de-compras_purchaseItem__nvc_g",deleteButton:"lista-de-compras_deleteButton__Iub79",input:"lista-de-compras_input__8vWBH",select:"lista-de-compras_select__ATwx7",button:"lista-de-compras_button__y1F5X",quantityInput:"lista-de-compras_quantityInput__8nx2h",priceInput:"lista-de-compras_priceInput__eP7iX",purchaseContainer:"lista-de-compras_purchaseContainer__W7j_J",purchaseList:"lista-de-compras_purchaseList__keIE3",expandButton:"lista-de-compras_expandButton__yb__E",hiddenList:"lista-de-compras_hiddenList__ErI2w",horti:"lista-de-compras_horti__qNDGZ",base:"lista-de-compras_base__tk9yg",higiene:"lista-de-compras_higiene__A28aX",tempero:"lista-de-compras_tempero__CPGsX",extra:"lista-de-compras_extra__GafWf",carne:"lista-de-compras_carne__iIhcO",bebida:"lista-de-compras_bebida__3_vVh"}}},e=>{var a=a=>e(e.s=a);e.O(0,[563,705,636,593,792],()=>a(972)),_N_E=e.O()}]);