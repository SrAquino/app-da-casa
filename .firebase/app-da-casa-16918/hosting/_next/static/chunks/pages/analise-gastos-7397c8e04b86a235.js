(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[27],{8488:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/analise-gastos",function(){return a(97)}])},8636:(e,s,a)=>{"use strict";a.d(s,{A:()=>d});var t=a(4848),r=a(6540),l=a(1106),n=a.n(l),i=a(3914),c=a(2490),o=a.n(c);let d=()=>{let[e,s]=(0,r.useState)(!1);return(0,t.jsxs)("div",{className:"".concat(o().sidebar," ").concat(e?o().expanded:o().collapsed),children:[(0,t.jsx)("button",{onClick:()=>{s(!e)},className:o().toggleButton,children:e?"Esconder":(0,t.jsx)(i.OXb,{})}),(0,t.jsx)("h2",{children:"Menu"}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:(0,t.jsx)(n(),{href:"/controle-de-gastos",children:e?"Controle de Gastos":(0,t.jsx)(i.MxO,{})})}),(0,t.jsx)("li",{children:(0,t.jsx)(n(),{href:"/analise-gastos",children:e?"Gr\xe1ficos":(0,t.jsx)(i.qvi,{})})}),(0,t.jsx)("li",{children:(0,t.jsx)(n(),{href:"/lista-de-compras",children:e?"Lista de Compras":(0,t.jsx)(i.AsH,{})})}),(0,t.jsx)("li",{children:(0,t.jsx)(n(),{href:"/analise-mercado",children:e?"Pre\xe7os de mercado":(0,t.jsx)(i.qvi,{})})}),(0,t.jsx)("li",{children:(0,t.jsx)(n(),{href:"/moedas-da-casa",children:e?"Moedas da Casa":(0,t.jsx)(i.cEG,{})})})]})]})}},97:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>h});var t=a(4848),r=a(6540),l=a(8636),n=a(7525),i=a(4731),c=a(6118),o=a(6784),d=a.n(o);c.t1.register(c.PP,c.kc,c.E8,c.hE,c.m_,c.s$,c.Bs);let h=()=>{let[e,s]=(0,r.useState)([]),[a,c]=(0,r.useState)([]),[o,h]=(0,r.useState)(""),[_,x]=(0,r.useState)({}),[u,j]=(0,r.useState)({}),[p,m]=(0,r.useState)([]),[g,b]=(0,r.useState)(3),[f,C]=(0,r.useState)([,,,].fill("")),[N,v]=(0,r.useState)([]),E=["Mercado","A\xe7ougue","Padaria","Horti","Pet","Contas","Lazer","Transporte","Outros"];(0,r.useEffect)(()=>{(0,n.lo)().then(e=>c(e)).catch(e=>console.error("Error fetching users:",e))},[]),(0,r.useEffect)(()=>{if(o){let[e,a]=o.split("-"),t="".concat(a).concat(e);(0,n.ck)(t).then(e=>{s(e);let a=e.reduce((e,s)=>(e[s.user]=(e[s.user]||0)+parseFloat(s.value),e),{});j(a),m(Object.keys(a))}).catch(e=>console.error("Error fetching expenses:",e))}},[o]),(0,r.useEffect)(()=>{o&&x(E.reduce((s,a)=>(s[a]=e.filter(e=>e.category===a).reduce((e,s)=>e+parseFloat(s.value),0),s),{}))},[o,e]);let F=Object.values(_).reduce((e,s)=>e+s,0),S={labels:E,datasets:[{label:"Gastos por Categoria",data:E.map(e=>_[e]||0),backgroundColor:"rgba(75, 192, 192, 0.6)"}]},k={labels:E,datasets:[{label:"Gastos por Categoria (%)",data:E.map(e=>(_[e]||0)/F*100),backgroundColor:["#FF6384","#36A2EB","#FFCE56","#FF9F40","#4BC0C0","#9966FF","#FF6384","#36A2EB","#FFCE56"]}]};a.length,a.filter(e=>u[e.email.split("@")[0]]);let P=(e,s)=>{let a=[...f];a[e]=s,C(a)};return(0,t.jsxs)("div",{className:d().container,children:[(0,t.jsx)(l.A,{}),(0,t.jsxs)("div",{className:d().content,children:[(0,t.jsx)("h1",{className:d().title,children:"An\xe1lise de Gastos"}),(0,t.jsxs)("div",{className:d().filterContainer,children:[(0,t.jsx)("label",{htmlFor:"month",className:d().label,children:"Selecione o m\xeas:"}),(0,t.jsx)("input",{type:"month",id:"month",value:o,onChange:e=>h(e.target.value),className:d().input})]}),(0,t.jsxs)("div",{className:d().analysisContainer,children:[(0,t.jsx)("div",{className:d().tableContainer,children:(0,t.jsxs)("table",{className:d().table,children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Categoria"}),(0,t.jsx)("th",{children:"Valor"})]})}),(0,t.jsx)("tbody",{children:o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"M\xeas"}),(0,t.jsx)("td",{children:o})]}),E.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:e}),(0,t.jsxs)("td",{children:["R$",(_[e]||0).toFixed(2)]})]},e)),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"Total"}),(0,t.jsxs)("td",{children:["R$",F.toFixed(2)]})]})]})})]})}),(0,t.jsx)("div",{className:d().chartContainer,children:(0,t.jsx)(i.yP,{data:S})}),(0,t.jsx)("div",{className:d().chartContainer,children:(0,t.jsx)(i.Fq,{data:k})})]}),(0,t.jsxs)("div",{className:d().userExpenses,children:[(0,t.jsx)("h2",{children:"Gastos por Usu\xe1rio"}),(0,t.jsx)("ul",{children:p.map(e=>(0,t.jsxs)("li",{children:[e,": R$",(u[e]||0).toFixed(2)]},e))})]}),(0,t.jsxs)("div",{className:d().expenseSplitter,children:[(0,t.jsx)("h2",{className:d().title,children:"Divisor de Despesas"}),(0,t.jsx)("label",{className:d().label,children:"N\xfamero de moradores:"}),(0,t.jsx)("input",{type:"number",value:g,onChange:e=>{let s=parseInt(e.target.value,10)||1;b(s),C(Array(s).fill("")),v([])},className:d().input,min:"1"}),f.map((e,s)=>(0,t.jsxs)("div",{className:d().splitExpenseItem,children:[(0,t.jsxs)("label",{children:["Morador ",s+1,":"]}),(0,t.jsx)("input",{type:"number",value:e,onChange:e=>P(s,e.target.value),className:d().input})]},s)),(0,t.jsx)("button",{onClick:()=>{let e=f.length,s=f.map(e=>parseFloat(e)||0),a=s.reduce((e,s)=>e+s,0)/e,t=s.map(e=>e-a),r=[],l=[];t.forEach((e,s)=>{e<0&&r.push([s,-e]),e>0&&l.push([s,e])});let n=[],i=0,c=0;for(;i<r.length&&c<l.length;){let[e,s]=r[i],[a,t]=l[c],o=Math.min(s,t);n.push({from:e+1,to:a+1,amount:o.toFixed(2)}),r[i][1]-=o,l[c][1]-=o,0===r[i][1]&&i++,0===l[c][1]&&c++}v(n)},className:d().button,children:"Calcular Pagamentos"}),(0,t.jsxs)("div",{className:d().transactions,children:[N.length>0&&(0,t.jsx)("h3",{className:d().subtitle,children:"Pagamentos necess\xe1rios:"}),N.map((e,s)=>(0,t.jsxs)("p",{className:d().transactionItem,children:["Morador ",e.from," deve pagar R$ ",e.amount," para Morador ",e.to]},s))]})]})]})]})}},2490:e=>{e.exports={sidebar:"Sidebar_sidebar__HYpoR",collapsed:"Sidebar_collapsed__jq1k3",toggleButton:"Sidebar_toggleButton__u5PL9",expanded:"Sidebar_expanded__t69bD"}},6784:e=>{e.exports={container:"graficos_container__8QRSM",sidebar:"graficos_sidebar__fnf_H",content:"graficos_content__r4OTS",title:"graficos_title__gz74L",filterContainer:"graficos_filterContainer__sC8NO",label:"graficos_label__bUlN9",input:"graficos_input__BX232",table:"graficos_table__eun5v",tableContainer:"graficos_tableContainer__aJQSP",tableHeader:"graficos_tableHeader__crHPN",tableRow:"graficos_tableRow__ssj1a",tableCell:"graficos_tableCell__E3gkI",chartContainer:"graficos_chartContainer__PasbD",userExpenses:"graficos_userExpenses__kkcTx",debtMessages:"graficos_debtMessages__ltWci",expenseSplitter:"graficos_expenseSplitter__lKK_O",splitExpenseItem:"graficos_splitExpenseItem___jEyA",transactions:"graficos_transactions__qwOBz",transactionItem:"graficos_transactionItem__vj_VL",analysisContainer:"graficos_analysisContainer__T7EuH",button:"graficos_button__DXi1U"}}},e=>{var s=s=>e(e.s=s);e.O(0,[563,201,705,888,636,593,792],()=>s(8488)),_N_E=e.O()}]);