(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[310],{8682:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/controle-de-gastos",function(){return t(5004)}])},7867:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});var a=t(4848),l=t(6540),n=t(6424),o=t(7400);let r=e=>{let{children:s}=e,{user:t,loading:r}=(0,o.A)(),d=(0,n.useRouter)();return((0,l.useEffect)(()=>{r||t||d.push("/")},[t,r,d]),r)?(0,a.jsx)("div",{children:"Loading..."}):s}},8636:(e,s,t)=>{"use strict";t.d(s,{A:()=>c});var a=t(4848),l=t(6540),n=t(1106),o=t.n(n),r=t(3914),d=t(2490),i=t.n(d);let c=()=>{let[e,s]=(0,l.useState)(!1);return(0,a.jsxs)("div",{className:"".concat(i().sidebar," ").concat(e?i().expanded:i().collapsed),children:[(0,a.jsx)("button",{onClick:()=>{s(!e)},className:i().toggleButton,children:e?"Esconder":(0,a.jsx)(r.OXb,{})}),(0,a.jsx)("h2",{children:"Menu"}),(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:(0,a.jsx)(o(),{href:"/controle-de-gastos",children:e?"Controle de Gastos":(0,a.jsx)(r.MxO,{})})}),(0,a.jsx)("li",{children:(0,a.jsx)(o(),{href:"/analise-gastos",children:e?"Gr\xe1ficos":(0,a.jsx)(r.qvi,{})})}),(0,a.jsx)("li",{children:(0,a.jsx)(o(),{href:"/lista-de-compras",children:e?"Lista de Compras":(0,a.jsx)(r.AsH,{})})}),(0,a.jsx)("li",{children:(0,a.jsx)(o(),{href:"/analise-mercado",children:e?"Pre\xe7os de mercado":(0,a.jsx)(r.qvi,{})})}),(0,a.jsx)("li",{children:(0,a.jsx)(o(),{href:"/moedas-da-casa",children:e?"Moedas da Casa":(0,a.jsx)(r.cEG,{})})})]})]})}},5004:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var a=t(4848),l=t(6540),n=t(8636),o=t(7867),r=t(7525),d=t(7400),i=t(3518),c=t.n(i);let u=()=>{let[e,s]=(0,l.useState)([]),[t,i]=(0,l.useState)({date:new Date().toISOString().split("T")[0],value:"",category:"",description:"",type:"Total",selectedUsers:[]}),[u,h]=(0,l.useState)(new Date().toISOString().slice(0,7)),[x,p]=(0,l.useState)(""),{user:j}=(0,d.A)();(0,l.useEffect)(()=>{if(u){let[e,t]=u.split("-"),a="".concat(t).concat(e);(0,r.ck)(a).then(e=>s(e)).catch(e=>console.error("Error fetching expenses:",e))}},[u]);let _=u?(e=>{let[s,t]=e.split("-");return new Date(s,t,0).getDate()})(u):0,g=e.filter(e=>e.user===x),v=g.reduce((e,s)=>e+parseFloat(s.value),0),m=[...new Set(e.map(e=>e.user))],b=e=>"R$ ".concat(parseFloat(e).toFixed(2)),S=e=>{i(s=>{let t;return t="Rela\xe7\xe3o passada"===s.category?s.selectedUsers.includes(e)?[]:[e]:s.selectedUsers.includes(e)?s.selectedUsers.filter(s=>s!==e):[...s.selectedUsers,e],{...s,selectedUsers:t}})};return(0,a.jsx)(o.A,{children:(0,a.jsxs)("div",{className:c().container,children:[(0,a.jsx)(n.A,{}),(0,a.jsxs)("div",{className:c().content,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{children:"Controle de Gastos"}),j?(0,a.jsxs)("p",{children:["Bem-vindo, ",j.email,"!"]}):(0,a.jsx)("p",{children:"Usu\xe1rio n\xe3o autenticado."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"month",children:"Selecione o m\xeas:"}),(0,a.jsx)("input",{type:"month",id:"month",value:u,onChange:e=>h(e.target.value),className:c().input})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"user",children:"Selecione o usu\xe1rio:"}),(0,a.jsxs)("select",{id:"user",value:x,onChange:e=>p(e.target.value),className:c().input,children:[(0,a.jsx)("option",{value:"",children:"Selecione um usu\xe1rio"}),m.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),x&&(0,a.jsxs)("div",{className:c().userTable,children:[(0,a.jsxs)("h2",{children:["Gastos de ",x]}),(0,a.jsxs)("table",{className:c().table,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Dia"})," ",(0,a.jsx)("th",{children:"Gasto"}),(0,a.jsx)("th",{children:"Categoria"}),(0,a.jsx)("th",{children:"Descri\xe7\xe3o"}),(0,a.jsx)("th",{children:"Divis\xe3o"})," "]})}),(0,a.jsxs)("tbody",{children:[Array.from({length:_},(e,s)=>{let t="".concat(u,"-").concat(String(s+1).padStart(2,"0")),l=g.filter(e=>e.date===t),n=l.reduce((e,s)=>e+parseFloat(s.value),0);return(0,a.jsxs)("tr",{className:s%2==0?c().evenRow:c().oddRow,children:[(0,a.jsx)("td",{children:String(s+1).padStart(2,"0")})," ",(0,a.jsx)("td",{children:b(n)}),(0,a.jsx)("td",{children:l.map(e=>(0,a.jsx)("div",{children:e.category},e.id))}),(0,a.jsx)("td",{children:l.map(e=>(0,a.jsx)("div",{children:e.description},e.id))}),(0,a.jsx)("td",{children:l.map(e=>(0,a.jsx)("div",{children:e.type},e.id))})]},t)}),(0,a.jsxs)("tr",{className:c().totalRow,children:[(0,a.jsx)("td",{children:"Total"}),(0,a.jsx)("td",{children:b(v)}),(0,a.jsx)("td",{}),(0,a.jsx)("td",{}),(0,a.jsx)("td",{})]})]})]})]}),(0,a.jsxs)("div",{className:c().addExpense,children:[(0,a.jsx)("h2",{children:"Adicionar Gasto"}),(0,a.jsx)("input",{type:"date",value:t.date,onChange:e=>i({...t,date:e.target.value}),className:c().input}),(0,a.jsx)("input",{type:"number",value:t.value,onChange:e=>i({...t,value:e.target.value}),placeholder:"Valor",className:c().input}),(0,a.jsxs)("select",{value:t.category,onChange:e=>{let s=e.target.value;i(e=>({...e,category:s,type:"Rela\xe7\xe3o passada"===s?"Selecionados":e.type,selectedUsers:"Rela\xe7\xe3o passada"===s?e.selectedUsers.slice(0,1):e.selectedUsers}))},className:c().input,children:[(0,a.jsx)("option",{value:"",children:"Selecione uma categoria"}),["Mercado","A\xe7ougue","Padaria","Horti","Pet","Contas","Lazer","Transporte","Outros","Rela\xe7\xe3o passada"].map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsxs)("select",{value:t.type,onChange:e=>i({...t,type:e.target.value}),className:c().input,disabled:"Rela\xe7\xe3o passada"===t.category,children:[(0,a.jsx)("option",{value:"Total",children:"Dividir para todos"}),(0,a.jsx)("option",{value:"Individual",children:"Gasto individual"}),(0,a.jsx)("option",{value:"Selecionados",children:"Dividir com"})]}),"Selecionados"===t.type&&(0,a.jsx)("div",{className:c().userCheckboxes,children:m.map(e=>(0,a.jsx)("div",{children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:t.selectedUsers.includes(e),onChange:()=>S(e),disabled:e===j.email.split("@")[0]||"Rela\xe7\xe3o passada"===t.category&&t.selectedUsers.length>=1&&!t.selectedUsers.includes(e)}),e]})},e))}),(0,a.jsx)("input",{type:"text",value:t.description,onChange:e=>i({...t,description:e.target.value}),placeholder:"Descri\xe7\xe3o (opcional)",className:c().input}),(0,a.jsx)("button",{onClick:()=>{if(!t.date||!t.value||!t.category)return;let a=j.email.split("@")[0],[l,n]=t.date.split("-"),o={...t,user:a};(0,r.k5)(o,"".concat(n).concat(l)).then(t=>{s([...e,t]),i({date:new Date().toISOString().split("T")[0],value:"",category:"",description:"",type:"Total",selectedUsers:[]})}).catch(e=>console.error("Error adding expense:",e))},className:c().button,children:"Adicionar"})]})]})]})})}},2490:e=>{e.exports={sidebar:"Sidebar_sidebar__HYpoR",collapsed:"Sidebar_collapsed__jq1k3",toggleButton:"Sidebar_toggleButton__u5PL9",expanded:"Sidebar_expanded__t69bD"}},3518:e=>{e.exports={container:"controle-de-gastos_container___TxTf",content:"controle-de-gastos_content__XGCXu",expensesContainer:"controle-de-gastos_expensesContainer__lhM5_",userColumn:"controle-de-gastos_userColumn__2UTV2",expensesList:"controle-de-gastos_expensesList__tAMrd",expenseItem:"controle-de-gastos_expenseItem__q6LsB",addExpense:"controle-de-gastos_addExpense__vIbMo",input:"controle-de-gastos_input__ohXk3",select:"controle-de-gastos_select__C0v_g",button:"controle-de-gastos_button__Eg2uy",table:"controle-de-gastos_table__WHyKK",evenRow:"controle-de-gastos_evenRow__pmrrJ",oddRow:"controle-de-gastos_oddRow__J93qe",totalRow:"controle-de-gastos_totalRow__P9J4d"}}},e=>{var s=s=>e(e.s=s);e.O(0,[563,705,424,636,593,792],()=>s(8682)),_N_E=e.O()}]);