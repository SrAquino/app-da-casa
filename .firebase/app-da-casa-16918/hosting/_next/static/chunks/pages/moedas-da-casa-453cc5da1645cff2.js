(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[270],{6374:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/moedas-da-casa",function(){return s(1156)}])},7867:(e,a,s)=>{"use strict";s.d(a,{A:()=>l});var t=s(4848),d=s(6540),n=s(6424),r=s(7400);let l=e=>{let{children:a}=e,{user:s,loading:l}=(0,r.A)(),c=(0,n.useRouter)();return((0,d.useEffect)(()=>{l||s||c.push("/")},[s,l,c]),l)?(0,t.jsx)("div",{children:"Loading..."}):a}},8636:(e,a,s)=>{"use strict";s.d(a,{A:()=>o});var t=s(4848),d=s(6540),n=s(1106),r=s.n(n),l=s(3914),c=s(2490),i=s.n(c);let o=()=>{let[e,a]=(0,d.useState)(!1);return(0,t.jsxs)("div",{className:"".concat(i().sidebar," ").concat(e?i().expanded:i().collapsed),children:[(0,t.jsx)("button",{onClick:()=>{a(!e)},className:i().toggleButton,children:e?"Esconder":(0,t.jsx)(l.OXb,{})}),(0,t.jsx)("h2",{children:"Menu"}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:(0,t.jsx)(r(),{href:"/controle-de-gastos",children:e?"Controle de Gastos":(0,t.jsx)(l.MxO,{})})}),(0,t.jsx)("li",{children:(0,t.jsx)(r(),{href:"/analise-gastos",children:e?"Gr\xe1ficos":(0,t.jsx)(l.qvi,{})})}),(0,t.jsx)("li",{children:(0,t.jsx)(r(),{href:"/lista-de-compras",children:e?"Lista de Compras":(0,t.jsx)(l.AsH,{})})}),(0,t.jsx)("li",{children:(0,t.jsx)(r(),{href:"/analise-mercado",children:e?"Pre\xe7os de mercado":(0,t.jsx)(l.qvi,{})})}),(0,t.jsx)("li",{children:(0,t.jsx)(r(),{href:"/moedas-da-casa",children:e?"Moedas da Casa":(0,t.jsx)(l.cEG,{})})})]})]})}},1156:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>h});var t=s(4848),d=s(6540),n=s(8636),r=s(7867),l=s(7525),c=s(7400),i=s(6614),o=s.n(i);let h=()=>{let[e,a]=(0,d.useState)([]),[s,i]=(0,d.useState)({date:new Date().toISOString().split("T")[0],type:"",value:""}),[h,u]=(0,d.useState)(""),[x,j]=(0,d.useState)(""),{user:p}=(0,c.A)(),m=["\uD83C\uDFCB\uD83C\uDFFB","\uD83C\uDF9F","\uD83C\uDFA8","\uD83C\uDF77","\uD83D\uDCB0","\uD83E\uDD47","❤‍","\uD83C\uDF00","\uD83D\uDCCC"];(0,d.useEffect)(()=>{if(h){let[e,s]=h.split("-"),t="coins_".concat(s).concat(e);(0,l.X)(t).then(e=>a(e)).catch(e=>console.error("Error fetching coins:",e))}},[h]);let _=(t,d)=>{if(!s.date||!t||!d)return;let n=p.email.split("@")[0],[r,c]=s.date.split("-"),i={date:s.date,type:t,value:d,user:n};(0,l.XZ)(i,"coins_".concat(c).concat(r)).then(s=>{a([...e,s]),w(m.reduce((e,a)=>(e[a]={add:"",spend:""},e),{}))}).catch(e=>console.error("Error adding coin:",e))},v=(t,d)=>{let n=p.email.split("@")[0],[r,c]=s.date.split("-"),i={date:s.date,type:t,value:-d,user:n};if(N[t]-d<0){alert("N\xe3o \xe9 poss\xedvel gastar mais moedas do que o total dispon\xedvel para ".concat(t,"."));return}(0,l.XZ)(i,"coins_".concat(c).concat(r)).then(s=>{a([...e,s]),w(m.reduce((e,a)=>(e[a]={add:"",spend:""},e),{}))}).catch(e=>console.error("Error spending coin:",e))},b=h?(e=>{let[a,s]=e.split("-");return new Date(a,s,0).getDate()})(h):0,g=e.filter(e=>e.user===x),f=[...new Set(e.map(e=>e.user))],N=m.reduce((e,a)=>(e[a]=g.filter(e=>e.type===a).reduce((e,a)=>e+parseFloat(a.value),0),e),{}),[S,w]=(0,d.useState)(m.reduce((e,a)=>(e[a]={add:"",spend:""},e),{})),C=(e,a,s)=>{w({...S,[e]:{...S[e],[a]:s}})};return(0,t.jsx)(r.A,{children:(0,t.jsxs)("div",{className:o().container,children:[(0,t.jsx)(n.A,{}),(0,t.jsxs)("div",{className:o().content,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{children:"Moedas da Casa"}),p?(0,t.jsxs)("p",{children:["Bem-vindo, ",p.email,"!"]}):(0,t.jsx)("p",{children:"Usu\xe1rio n\xe3o autenticado."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"month",children:"Selecione o m\xeas:"}),(0,t.jsx)("input",{type:"month",id:"month",value:h,onChange:e=>u(e.target.value),className:o().input})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"user",children:"Selecione o usu\xe1rio:"}),(0,t.jsxs)("select",{id:"user",value:x,onChange:e=>j(e.target.value),className:o().input,children:[(0,t.jsx)("option",{value:"",children:"Selecione um usu\xe1rio"}),f.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),x&&(0,t.jsxs)("div",{className:o().userTable,children:[(0,t.jsxs)("h2",{children:["Moedas de ",x]}),(0,t.jsxs)("table",{className:o().table,children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Dia"}),m.map(e=>(0,t.jsx)("th",{children:e},e))]})}),(0,t.jsxs)("tbody",{children:[Array.from({length:b},(e,a)=>{let s="".concat(h,"-").concat(String(a+1).padStart(2,"0")),d=g.filter(e=>e.date===s);return(0,t.jsxs)("tr",{className:a%2==0?o().evenRow:o().oddRow,children:[(0,t.jsx)("td",{children:String(a+1).padStart(2,"0")}),m.map(e=>(0,t.jsx)("td",{children:d.filter(a=>a.type===e).map(e=>(0,t.jsx)("div",{children:e.value},e.id))},e))]},s)}),(0,t.jsxs)("tr",{className:o().totalRow,children:[(0,t.jsx)("td",{children:"Total"}),m.map(e=>(0,t.jsx)("td",{children:N[e]},e))]})]})]})]}),(0,t.jsxs)("div",{className:o().addCoin,children:[(0,t.jsx)("h2",{children:"Adicionar/Gastar Moedas"}),(0,t.jsx)("input",{type:"date",value:s.date,onChange:e=>i({...s,date:e.target.value}),className:o().input}),(0,t.jsxs)("table",{className:o().table,children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"A\xe7\xe3o"}),m.map(e=>(0,t.jsx)("th",{children:e},e))]})}),(0,t.jsxs)("tbody",{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"Adicionar"}),m.map(e=>(0,t.jsx)("td",{children:(0,t.jsx)("input",{type:"number",value:S[e].add,onChange:a=>C(e,"add",a.target.value),className:o().input})},e)),(0,t.jsx)("td",{children:(0,t.jsx)("button",{onClick:()=>{m.forEach(e=>{S[e].add&&_(e,S[e].add)})},className:o().button,children:"Adicionar"})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"Gastar"}),m.map(e=>(0,t.jsx)("td",{children:(0,t.jsx)("input",{type:"number",value:S[e].spend,onChange:a=>C(e,"spend",a.target.value),className:o().input})},e)),(0,t.jsx)("td",{children:(0,t.jsx)("button",{onClick:()=>{m.forEach(e=>{S[e].spend&&v(e,S[e].spend)})},className:o().button,children:"Gastar"})})]})]})]})]})]})]})})}},2490:e=>{e.exports={sidebar:"Sidebar_sidebar__HYpoR",collapsed:"Sidebar_collapsed__jq1k3",toggleButton:"Sidebar_toggleButton__u5PL9",expanded:"Sidebar_expanded__t69bD"}},6614:e=>{e.exports={container:"moedas-da-casa_container__hsn0b",content:"moedas-da-casa_content__czhux",input:"moedas-da-casa_input__w_naL",button:"moedas-da-casa_button__hyxZm",table:"moedas-da-casa_table__63vRg",evenRow:"moedas-da-casa_evenRow__G3whz",oddRow:"moedas-da-casa_oddRow__NW490",deleteButton:"moedas-da-casa_deleteButton__StqCE",addCoin:"moedas-da-casa_addCoin__A7kIH",totalRow:"moedas-da-casa_totalRow__ipCL9"}}},e=>{var a=a=>e(e.s=a);e.O(0,[563,705,424,636,593,792],()=>a(6374)),_N_E=e.O()}]);