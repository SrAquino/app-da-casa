(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[310],{8682:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/controle-de-gastos",function(){return t(5004)}])},7867:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var a=t(4848),n=t(6540),r=t(6424),o=t(7400);let l=e=>{let{children:s}=e,{user:t,loading:l}=(0,o.A)(),d=(0,r.useRouter)();return((0,n.useEffect)(()=>{l||t||d.push("/")},[t,l,d]),l)?(0,a.jsx)("div",{children:"Loading..."}):s}},8636:(e,s,t)=>{"use strict";t.d(s,{A:()=>i});var a=t(4848),n=t(6540),r=t(1106),o=t.n(r),l=t(3914),d=t(2490),c=t.n(d);let i=()=>{let[e,s]=(0,n.useState)(!1);return(0,a.jsxs)("div",{className:"".concat(c().sidebar," ").concat(e?c().expanded:c().collapsed),children:[(0,a.jsx)("button",{onClick:()=>{s(!e)},className:c().toggleButton,children:e?"Esconder":(0,a.jsx)(l.OXb,{})}),(0,a.jsx)("h2",{children:"Menu"}),(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:(0,a.jsx)(o(),{href:"/controle-de-gastos",children:e?"Controle de Gastos":(0,a.jsx)(l.MxO,{})})}),(0,a.jsx)("li",{children:(0,a.jsx)(o(),{href:"/analise-gastos",children:e?"Gr\xe1ficos":(0,a.jsx)(l.qvi,{})})}),(0,a.jsx)("li",{children:(0,a.jsx)(o(),{href:"/lista-de-compras",children:e?"Lista de Compras":(0,a.jsx)(l.AsH,{})})}),(0,a.jsx)("li",{children:(0,a.jsx)(o(),{href:"/analise-mercado",children:e?"Pre\xe7os de mercado":(0,a.jsx)(l.qvi,{})})}),(0,a.jsx)("li",{children:(0,a.jsx)(o(),{href:"/moedas-da-casa",children:e?"Moedas da Casa":(0,a.jsx)(l.cEG,{})})})]})]})}},5004:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var a=t(4848),n=t(6540),r=t(8636),o=t(7867),l=t(7525),d=t(7400),c=t(3518),i=t.n(c);let u=()=>{let[e,s]=(0,n.useState)([]),[t,c]=(0,n.useState)([]),[u,h]=(0,n.useState)({date:"",value:"",category:"",description:""}),[x,p]=(0,n.useState)(""),[j,_]=(0,n.useState)(""),{user:g}=(0,d.A)();(0,n.useEffect)(()=>{if((0,l.lo)().then(e=>s(e)).catch(e=>console.error("Error fetching users:",e)),x){let[e,s]=x.split("-"),t="".concat(s).concat(e);(0,l.ck)(t).then(e=>c(e)).catch(e=>console.error("Error fetching expenses:",e))}},[x]);let v=x?(e=>{let[s,t]=e.split("-");return new Date(s,t,0).getDate()})(x):0,m=t.filter(e=>e.user===j),b=m.reduce((e,s)=>e+parseFloat(s.value),0),f=[...new Set(t.map(e=>e.user))],C=e=>"R$ ".concat(parseFloat(e).toFixed(2));return(0,a.jsx)(o.A,{children:(0,a.jsxs)("div",{className:i().container,children:[(0,a.jsx)(r.A,{}),(0,a.jsxs)("div",{className:i().content,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{children:"Controle de Gastos"}),g?(0,a.jsxs)("p",{children:["Bem-vindo, ",g.email,"!"]}):(0,a.jsx)("p",{children:"Usu\xe1rio n\xe3o autenticado."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"month",children:"Selecione o m\xeas:"}),(0,a.jsx)("input",{type:"month",id:"month",value:x,onChange:e=>p(e.target.value),className:i().input})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"user",children:"Selecione o usu\xe1rio:"}),(0,a.jsxs)("select",{id:"user",value:j,onChange:e=>_(e.target.value),className:i().input,children:[(0,a.jsx)("option",{value:"",children:"Selecione um usu\xe1rio"}),f.map(s=>{var t;return(0,a.jsx)("option",{value:s,children:(null===(t=e.find(e=>e.email.split("@")[0]===s))||void 0===t?void 0:t.name)||s},s)})]})]}),j&&(0,a.jsxs)("div",{className:i().userTable,children:[(0,a.jsxs)("h2",{children:["Gastos de ",j]}),(0,a.jsxs)("table",{className:i().table,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Dia"})," ",(0,a.jsx)("th",{children:"Gasto"}),(0,a.jsx)("th",{children:"Categoria"}),(0,a.jsx)("th",{children:"Descri\xe7\xe3o"})]})}),(0,a.jsxs)("tbody",{children:[Array.from({length:v},(e,s)=>{let t="".concat(x,"-").concat(String(s+1).padStart(2,"0")),n=m.filter(e=>e.date===t),r=n.reduce((e,s)=>e+parseFloat(s.value),0);return(0,a.jsxs)("tr",{className:s%2==0?i().evenRow:i().oddRow,children:[(0,a.jsx)("td",{children:String(s+1).padStart(2,"0")})," ",(0,a.jsx)("td",{children:C(r)}),(0,a.jsx)("td",{children:n.map(e=>(0,a.jsx)("div",{children:e.category},e.id))}),(0,a.jsx)("td",{children:n.map(e=>(0,a.jsx)("div",{children:e.description},e.id))})]},t)}),(0,a.jsxs)("tr",{className:i().totalRow,children:[(0,a.jsx)("td",{children:"Total"}),(0,a.jsx)("td",{children:C(b)}),(0,a.jsx)("td",{}),(0,a.jsx)("td",{})]})]})]})]}),(0,a.jsxs)("div",{className:i().addExpense,children:[(0,a.jsx)("h2",{children:"Adicionar Gasto"}),(0,a.jsx)("input",{type:"date",value:u.date,onChange:e=>h({...u,date:e.target.value}),className:i().input}),(0,a.jsx)("input",{type:"number",value:u.value,onChange:e=>h({...u,value:e.target.value}),placeholder:"Valor",className:i().input}),(0,a.jsxs)("select",{value:u.category,onChange:e=>h({...u,category:e.target.value}),className:i().input,children:[(0,a.jsx)("option",{value:"",children:"Selecione uma categoria"}),["Mercado","A\xe7ougue","Padaria","Horti","Pet","Contas","Lazer","Transporte","Outros","Rela\xe7\xe3o passada"].map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsx)("input",{type:"text",value:u.description,onChange:e=>h({...u,description:e.target.value}),placeholder:"Descri\xe7\xe3o (opcional)",className:i().input}),(0,a.jsx)("button",{onClick:()=>{if(!u.date||!u.value||!u.category)return;let e=g.email.split("@")[0],[s,a]=u.date.split("-"),n={...u,user:e};(0,l.k5)(n,"".concat(a).concat(s)).then(e=>{c([...t,e]),h({date:"",value:"",category:"",description:""})}).catch(e=>console.error("Error adding expense:",e))},className:i().button,children:"Adicionar"})]})]})]})})}},2490:e=>{e.exports={sidebar:"Sidebar_sidebar__HYpoR",collapsed:"Sidebar_collapsed__jq1k3",toggleButton:"Sidebar_toggleButton__u5PL9",expanded:"Sidebar_expanded__t69bD"}},3518:e=>{e.exports={container:"controle-de-gastos_container___TxTf",content:"controle-de-gastos_content__XGCXu",expensesContainer:"controle-de-gastos_expensesContainer__lhM5_",userColumn:"controle-de-gastos_userColumn__2UTV2",expensesList:"controle-de-gastos_expensesList__tAMrd",expenseItem:"controle-de-gastos_expenseItem__q6LsB",addExpense:"controle-de-gastos_addExpense__vIbMo",input:"controle-de-gastos_input__ohXk3",select:"controle-de-gastos_select__C0v_g",button:"controle-de-gastos_button__Eg2uy",table:"controle-de-gastos_table__WHyKK",evenRow:"controle-de-gastos_evenRow__pmrrJ",oddRow:"controle-de-gastos_oddRow__J93qe",totalRow:"controle-de-gastos_totalRow__P9J4d"}}},e=>{var s=s=>e(e.s=s);e.O(0,[563,705,424,636,593,792],()=>s(8682)),_N_E=e.O()}]);