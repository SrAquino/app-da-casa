(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[809],{972:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/lista-de-compras",function(){return t(3315)}])},8636:(e,a,t)=>{"use strict";t.d(a,{A:()=>d});var s=t(4848),r=t(6540),i=t(1106),c=t.n(i),n=t(3914),l=t(2490),o=t.n(l);let d=()=>{let[e,a]=(0,r.useState)(!1);return(0,s.jsxs)("div",{className:"".concat(o().sidebar," ").concat(e?o().expanded:o().collapsed),children:[(0,s.jsx)("button",{onClick:()=>{a(!e)},className:o().toggleButton,children:e?"Esconder":(0,s.jsx)(n.OXb,{})}),(0,s.jsx)("h2",{children:"Menu"}),(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:(0,s.jsx)(c(),{href:"/controle-de-gastos",children:e?"Controle de Gastos":(0,s.jsx)(n.MxO,{})})}),(0,s.jsx)("li",{children:(0,s.jsx)(c(),{href:"/analise-gastos",children:e?"Gr\xe1ficos":(0,s.jsx)(n.qvi,{})})}),(0,s.jsx)("li",{children:(0,s.jsx)(c(),{href:"/lista-de-compras",children:e?"Lista de Compras":(0,s.jsx)(n.AsH,{})})}),(0,s.jsx)("li",{children:(0,s.jsx)(c(),{href:"/analise-mercado",children:e?"Pre\xe7os de mercado":(0,s.jsx)(n.qvi,{})})}),(0,s.jsx)("li",{children:(0,s.jsx)(c(),{href:"/moedas-da-casa",children:e?"Moedas da Casa":(0,s.jsx)(n.cEG,{})})}),(0,s.jsx)("li",{children:(0,s.jsx)(c(),{href:"/academia",children:e?"Academia":(0,s.jsx)(n.bB,{})})})]})]})}},3315:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>o});var s=t(4848),r=t(6540),i=t(8636),c=t(7794),n=t(1953),l=t.n(n);let o=()=>{let[e,a]=(0,r.useState)([]),[t,n]=(0,r.useState)(""),[o,d]=(0,r.useState)("Horti"),[p,h]=(0,r.useState)(!1),[u,m]=(0,r.useState)([]),[_,x]=(0,r.useState)(null),[j,b]=(0,r.useState)(!0),[C,v]=(0,r.useState)(new Date().toISOString().split("T")[0]),[g,N]=(0,r.useState)(0),[f,y]=(0,r.useState)({}),[w,S]=(0,r.useState)({}),[k,L]=(0,r.useState)({}),[T,I]=(0,r.useState)([]),[q,B]=(0,r.useState)([]),F=["Horti","Base","Higiene","Bebida","Tempero","Extra","Carne"];(0,r.useEffect)(()=>{(0,c.JS)().then(e=>{a(e.sort((e,a)=>e.name.localeCompare(a.name)))}).catch(e=>{console.error("There was an error fetching the items!",e)}),(0,c.Tp)().then(e=>{I(e.slice(-7))}).catch(e=>{console.error("There was an error fetching the past purchases!",e)}),(0,c.O0)().then(e=>{B(e)}).catch(e=>{console.error("There was an error fetching the open lists!",e)})},[]);let z=t=>{window.confirm("Tem certeza que deseja excluir este item?")&&(0,c.LD)(t).then(()=>{a(e.filter(e=>e.id!==t))}).catch(e=>{console.error("There was an error deleting the item!",e)})},E=(e,a,t)=>{m(u.map(s=>s.id===e?{...s,[a]:t}:s))},A=e=>{m(u.map(a=>a.id===e?{...a,active:!a.active}:a))},P=e=>{m(e.items),v(e.date),h(!0)},D=e=>{window.confirm("Tem certeza que deseja excluir esta lista?")&&(0,c.s8)(e).then(()=>{B(q.filter(a=>a.id!==e))}).catch(e=>{console.error("There was an error deleting the list!",e)})},O=e=>{S(a=>({...a,[e]:!a[e]}))},V=e=>{L(a=>({...a,[e]:!a[e]}))},R=F.reduce((a,t)=>(a[t]=e.filter(e=>e.category===t).sort((e,a)=>e.name.localeCompare(a.name)),a),{}),X=F.reduce((e,a)=>(e[a]=u.filter(e=>e.category===a).sort((e,a)=>e.name.localeCompare(a.name)),e),{});return(0,s.jsxs)("div",{className:l().container,children:[(0,s.jsx)(i.A,{}),(0,s.jsxs)("div",{className:l().content,children:[(0,s.jsx)("h1",{className:l().title,children:"Lista de Compras"}),F.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:l().categoryTitle,children:[e,(0,s.jsx)("button",{onClick:()=>O(e),className:l().expandButton,children:w[e]?"Minimizar":"Expandir"})]}),(0,s.jsx)("ul",{className:"".concat(l().list," ").concat(w[e]?"":l().hiddenList),children:R[e].map(a=>(0,s.jsxs)("li",{className:"".concat(l().listItem," ").concat(l()[e.toLowerCase()]),children:[a.name,(0,s.jsx)("button",{onClick:()=>z(a.id),className:l().deleteButton,children:"Excluir"})]},a.id))})]},e)),(0,s.jsx)("input",{type:"text",value:t,onChange:e=>n(e.target.value),placeholder:"Adicionar novo item",className:l().input}),(0,s.jsx)("select",{value:o,onChange:e=>d(e.target.value),className:l().select,children:F.map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsx)("button",{onClick:()=>{if(""!==t.trim()){if(e.find(e=>e.name.toLowerCase()===t.toLowerCase()&&e.category===o)){alert("Este item j\xe1 foi adicionado.");return}(0,c.B5)({name:t,category:o}).then(t=>{a([...e,t].sort((e,a)=>e.name.localeCompare(a.name))),n(""),p&&m([...u,{...t,size:"",quantity:"",price:"",date:C}].sort((e,a)=>e.name.localeCompare(a.name)))}).catch(e=>{console.error("There was an error adding the item!",e)})}},className:l().button,children:"Adicionar"}),(0,s.jsx)("button",{onClick:()=>{m(e.map(e=>({...e,size:"",quantity:"",price:"",date:C,active:!1}))),h(!0)},className:l().button,children:"Fazer Nova Compra"}),p&&(0,s.jsxs)("div",{className:l().purchaseContainer,children:[(0,s.jsx)("h2",{children:"Nova Compra"}),(0,s.jsxs)("label",{className:l().label,children:[(0,s.jsx)("input",{type:"checkbox",checked:j,onChange:()=>b(!j),className:l().checkbox}),"Usar data de hoje"]}),!j&&(0,s.jsx)("input",{type:"date",value:C,onChange:e=>v(e.target.value),className:l().input}),F.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:l().categoryTitle,children:[e,(0,s.jsx)("button",{onClick:()=>V(e),className:l().expandButton,children:k[e]?"Minimizar":"Expandir"})]}),(0,s.jsx)("ul",{className:"".concat(l().purchaseList," ").concat(k[e]?"":l().hiddenList),children:X[e].map(a=>(0,s.jsxs)("li",{className:"".concat(l().purchaseItem," ").concat(l()[e.toLowerCase()]),children:[(0,s.jsx)("span",{children:a.name}),(0,s.jsx)("input",{type:"number",placeholder:"Tamanho",value:a.size,onChange:e=>E(a.id,"size",e.target.value),className:"".concat(l().input," ").concat(l().sizeInput),disabled:!a.active}),(0,s.jsx)("input",{type:"number",placeholder:"Qtd",value:a.quantity,onChange:e=>E(a.id,"quantity",e.target.value),className:"".concat(l().input," ").concat(l().quantityInput),disabled:!a.active}),(0,s.jsx)("input",{type:"number",placeholder:"Pre\xe7o",value:a.price,onChange:e=>E(a.id,"price",e.target.value),className:"".concat(l().input," ").concat(l().priceInput),disabled:!a.active}),(0,s.jsxs)("label",{className:l().label,children:[(0,s.jsx)("input",{type:"checkbox",checked:a.active,onChange:()=>A(a.id),className:l().checkbox}),"Ativo"]})]},a.id))})]},e)),(0,s.jsx)("button",{onClick:()=>{let e=u.reduce((e,a)=>{if(a.active){let t=parseFloat(a.quantity)*parseFloat(a.price);e[a.category]=(e[a.category]||0)+t}return e},{});y(e),N(Object.values(e).reduce((e,a)=>e+a,0))},className:l().button,children:"Conferir Valor Atual"}),g>0&&(0,s.jsxs)("div",{className:l().currentTotal,children:[(0,s.jsxs)("h2",{children:["Valor Atual: R$",g.toFixed(2)]}),Object.entries(f).map(e=>{let[a,t]=e;return(0,s.jsxs)("p",{children:[a,": R$",t.toFixed(2)]},a)})]}),(0,s.jsx)("button",{onClick:()=>{for(let e of u)if(e.active&&(!e.size||!e.quantity||!e.price)){alert("Por favor, preencha todos os campos de tamanho, quantidade e pre\xe7o para os itens ativos.");return}let e=u.filter(e=>e.active),a=e.reduce((e,a)=>e+parseFloat(a.quantity)*parseFloat(a.price),0),t=F.reduce((a,t)=>(a[t]=e.filter(e=>e.category===t).reduce((e,a)=>e+parseFloat(a.quantity)*parseFloat(a.price),0),a),{}),s={items:e.map(e=>({...e,price:(parseFloat(e.price)/parseFloat(e.size)).toFixed(2)})),date:C,categoryValues:t};(0,c.hB)(s).then(()=>{h(!1),m([]),x(a),(0,c.dC)({totalValue:a,date:s.date,categoryValues:t})}).catch(e=>{console.error("There was an error saving the purchase!",e)})},className:l().button,children:"Finalizar Compra"}),(0,s.jsx)("button",{onClick:()=>{let e={items:u,date:C};(0,c.cH)(e).then(()=>{B([...q,e]),alert("Lista salva com sucesso!")}).catch(e=>{console.error("There was an error saving the list!",e)})},className:l().button,children:"Salvar Lista Atual"})]}),null!==_&&(0,s.jsx)("div",{className:l().lastPurchaseTotal,children:(0,s.jsxs)("h2",{children:["Valor Total da \xdaltima Compra: R$",_.toFixed(2)]})}),(0,s.jsxs)("div",{className:l().pastPurchasesContainer,children:[(0,s.jsx)("h2",{children:"Compras Realizadas"}),T.map(e=>(0,s.jsxs)("div",{className:l().purchaseCard,children:[(0,s.jsxs)("h3",{children:["Data: ",new Date(e.date).toLocaleDateString()]}),e.categoryValues&&Object.entries(e.categoryValues).map(e=>{let[a,t]=e;return(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{children:a}),(0,s.jsxs)("span",{children:["R$",t.toFixed(2)]})]},a)}),(0,s.jsxs)("p",{className:l().total,children:[(0,s.jsx)("span",{children:"Valor total"}),(0,s.jsxs)("span",{children:["R$",e.totalValue.toFixed(2)]})]})]},e.id))]}),(0,s.jsxs)("div",{className:l().openListsContainer,children:[(0,s.jsx)("h2",{children:"Listas em Aberto"}),q.map(e=>(0,s.jsxs)("div",{className:l().openListCard,children:[(0,s.jsxs)("h3",{children:["Data: ",new Date(e.date).toLocaleDateString()]}),(0,s.jsx)("button",{onClick:()=>P(e),className:l().button,children:"Editar"}),(0,s.jsx)("button",{onClick:()=>D(e.id),className:l().deleteButton,children:"Excluir"})]},e.id))]})]})]})}},2490:e=>{e.exports={sidebar:"Sidebar_sidebar__HYpoR",collapsed:"Sidebar_collapsed__jq1k3",toggleButton:"Sidebar_toggleButton__u5PL9",expanded:"Sidebar_expanded__t69bD"}},1953:e=>{e.exports={container:"lista-de-compras_container__hUshF",content:"lista-de-compras_content__RQ1As",title:"lista-de-compras_title__zraMx",categoryTitle:"lista-de-compras_categoryTitle__fWSrq",list:"lista-de-compras_list__kNx_g",listItem:"lista-de-compras_listItem__o2Zq9",purchaseItem:"lista-de-compras_purchaseItem__nvc_g",deleteButton:"lista-de-compras_deleteButton__Iub79",input:"lista-de-compras_input__8vWBH",select:"lista-de-compras_select__ATwx7",button:"lista-de-compras_button__y1F5X",quantityInput:"lista-de-compras_quantityInput__8nx2h",priceInput:"lista-de-compras_priceInput__eP7iX",sizeInput:"lista-de-compras_sizeInput__FP1US",purchaseContainer:"lista-de-compras_purchaseContainer__W7j_J",purchaseList:"lista-de-compras_purchaseList__keIE3",expandButton:"lista-de-compras_expandButton__yb__E",hiddenList:"lista-de-compras_hiddenList__ErI2w",horti:"lista-de-compras_horti__qNDGZ",base:"lista-de-compras_base__tk9yg",higiene:"lista-de-compras_higiene__A28aX",tempero:"lista-de-compras_tempero__CPGsX",extra:"lista-de-compras_extra__GafWf",carne:"lista-de-compras_carne__iIhcO",bebida:"lista-de-compras_bebida__3_vVh",pastPurchasesContainer:"lista-de-compras_pastPurchasesContainer__ksfAZ",purchaseCard:"lista-de-compras_purchaseCard__42Vst",total:"lista-de-compras_total__zgTPn",openListsContainer:"lista-de-compras_openListsContainer__VfjBd",openListCard:"lista-de-compras_openListCard__IBfXU"}}},e=>{var a=a=>e(e.s=a);e.O(0,[563,705,636,593,792],()=>a(972)),_N_E=e.O()}]);